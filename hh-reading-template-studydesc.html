<script src="../bower_components/ag-grid/dist/ag-grid.js"></script>
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/ag-grid-polymer/ag-grid-polymer.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<dom-module id="hh-reading-template-studydesc">
    <template>
        <link rel="stylesheet" href="../bower_components/ag-grid/dist/styles/ag-grid.css">
        <link rel="stylesheet" href="../bower_components/ag-grid/dist/styles/ag-theme-balham-dark.css">
        <style>
            :host {
                height: 100%;
                width: 100%;
            }
            .container {
                height: 100%;
                width: 100%;
            }

            ag-grid-polymer {
                width: 80%;
                height: 80%;
                margin-top: 5%;
            }

            .class-input{
                height: calc(100% - 40px);
                width: 100%;
            }

            .class-studyDescription{
                height: 40px;
                width: 70%;
                color: #aaaaaa;
                background-color: #2c333f;
            }
            .class-studyDescription-list{
                height: calc(100% - 40px);
                width: 60%;
                color: #aaaaaa;
                background-color: #2c333f;
            }

            .class-shortcut{
                /*height: 20%;*/
                height: 128px;
                width: 100%;
                color: #aaaaaa;
                background-color: #333a47;
            }

            .class-sd-btn{
                height: 40px;
                width: 100%;
                color: #aaaaaa;
                background-color: #252934;
                text-align: right;
                border-top: 5px solid black;
            }

            .btn {
                width: 100px;
                height: 30px;
                border: 0;
                font-size: 10pt;
                color: #fff;
                cursor: pointer;
                border-radius: 2px;
                margin: 5px;
            }

            #prevBtn {
                background: #ff646b;
            }
            #nextBtn {
                background: #4c7d35;
            }

            .icon-style {
                color: #aaaaaa;
                height: 25px;
                width: 25px;
                padding: 5px;
            }

            .class-search{
                width: 80%;
                margin-left: 10%;
            }
            .class-wrap{
                display: flex;
                height: calc(100% - 168px);
                width: 100%;
                background-color: #2c333f;
            }
            .class-studyDescription-title{
                height: 5%;
                color: #aaaaaa;
                background-color: #2c333f;
            }

            .checkBox-style{
                font-size: 15px;
                color: #aaaaaa;
                --paper-checkbox-checked-color: #0087cb;
                --paper-checkbox-label-color: #aaaaaa;
                --paper-checkbox-unchecked-color: #4c5667;
                padding: 3px;
            }

            paper-input {
                --paper-input-container-focus-color: #0087cb;
                --paper-input-container-input-color: #aaaaaa;
                --paper-input-container-input-text-align: initial;
                --paper-input-container-label-color: #aaaaaa;
            }

            .class-studyDescription-title, .class-shortcut-title{
                height: 40px;
                width: 100%;
                text-align: center;
                text-decoration: underline;
                font-size: 21px;
                font-weight: bold;
            }
            .title-style{
                margin
            }
        </style>
        <div class="container">
            <div class="class-input">
                <div class="class-studyDescription-title"><div class="font">Study Description</div></div>
                <div class="class-wrap">
                    <div class="class-studyDescription">
                        <paper-input class="class-search" char-counter maxlength="20"></paper-input>
                    </div>
                    <div class="class-studyDescription-list">
                        <ag-grid-polymer
                                class="ag-theme-balham-dark"
                                rowData="{{rowData}}" ,
                                columnDefs="{{columnDefs}}"
                        ></ag-grid-polymer>
                    </div>
                </div>
                <div class="class-shortcut">
                    <!--<div class="class-shortcut-title"><h2>Shortcut</h2></div>-->
                    <div class="class-shortcut-title"><div class="title-style">Shortcut</div></div>
                    <paper-input class="class-search" id="shortcut" char-counter  maxlength="30"></paper-input>
                </div>
            </div>
            <div class="class-sd-btn">
                <paper-checkbox id="studyDescChecked" class="checkBox-style" noink>All Selected Checked</paper-checkbox>
                <button id="prevBtn" class="btn">Prev</button>
                <button id="nextBtn" class="btn">Next</button>
            </div>
        </div>
    </template>
    <script>
        (function () {
            let _this;
            let _checkFinished = false;
            class HhReadingTemplateStudyDesc extends Polymer.Element {
                static get is() {
                    return 'hh-reading-template-studydesc';
                }

                constructor() {
                    super();
                    _this = this;

                    this.gridOptions = {
                        defaultColDef: {
                            suppressMenu: true // 메뉴 막기
                        },
                        enableSorting: true,
                        enableColResize: true,
                        rowSelection: "single",
                        overlayNoRowsTemplate: '<span class="ag-overlay-no-rows-center">No records Found</span>',
                        toolPanelSuppressSideButtons: true,
                        toolPanelSuppressRowGroups: true,
                        toolPanelSuppressValues: true,
                        toolPanelSuppressColumnSelectAll: true,
                        toolPanelSuppressColumnExpandAll: true,
                        toolPanelSuppressColumnFilter: true,
                        toolPanelSuppressPivots: true,
                        toolPanelSuppressPivotMode: true
                    };

                    this.columnDefs = [
                        {headerName: "Idx", field: "idx", width: 35},
                        {headerName: "Study Description", field: "studyDescription", width: 585}
                    ];
                    this.rowData = [
                        {idx:"0", studyDescription: "study description 11111"},
                        {idx:"1", studyDescription: "study description 22222"},
                        {idx:"2", studyDescription: "study description 33333"}
                    ];

                    this.gridOptions.onGridReady = (params) => {
                        params.api.sizeColumnsToFit();
                        console.log("test");
                    }

                    this.gridOptions.onRowSelected = (e) => {
                        console.log(e);
                    };

                    this.gridOptions.onRowDoubleClicked = (event) => {
                        console.log("double");
                    }
                }

                ready() {
                    super.ready();

                    this.$.studyDescChecked.addEventListener('change', function (e) {
                        if (e.target.checked) {
                            _checkFinished = true;
                            console.log("BODYPART CHECKED FINISHED");
                        }else{
                            _checkFinished = false;
                        }
                    });

                    this.$.prevBtn.addEventListener('click',function(){
                        _this.dispatchEvent(new CustomEvent('prevTabEvent'));
                    });

                    this.$.nextBtn.addEventListener('click',function(){
                        if(_checkFinished){
                            _this.dispatchEvent(new CustomEvent('nextTabEvent'));
                        }else{
                            console.log('check All Selected Checked');
                        }
                    });
                }
            }

            window.customElements.define(HhReadingTemplateStudyDesc.is, HhReadingTemplateStudyDesc);
        })();
    </script>
</dom-module>
