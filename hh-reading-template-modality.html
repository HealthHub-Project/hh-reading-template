<dom-module id="hh-reading-template-modality">
    <template>
        <style>
            :host {
                height: 100%;
                width: 100%;
            }

            .container {
                height: 100%;
                width: 100%;
            }

            .class-md {
                height: 5%;
            }

            .class-md {
                display: flex;
                height: calc(100% - 45px);
                width: 100%;
            }

            .class-md-field {
                display: flex;
                flex-direction: column;
                height: 100%;
                width: 222px;
                color: #aaaaaa;
                background-color: #333a47;
                font-size: 14px;
                border-right: 5px solid black;

            }

            .class-md-selected {
                width: calc(100% - 222px);
                padding-left: 10px;
                padding-right: 10px;
                color: #aaaaaa;
                background-color: #2c333f;
                font-size: 14px;
            }

            .class-md-btn {
                height: 45px;
                color: #aaaaaa;
                background-color: #252934;
                text-align: right;
                border-top: 5px solid black;
                /*padding-right: 15px;*/
            }

            .btn {
                width: 100px;
                height: 30px;
                border: 0;
                font-size: 10pt;
                color: #fff;
                cursor: pointer;
                border-radius: 2px;
                margin: 5px;
            }

            #nextBtn {
                /*background: #dddddd;*/
                background: #0087cb;
            }

            .class-md-selected-contents {
                height: 100%;
                width: 100%;
                display: flex;
                flex-wrap: wrap;
                overflow: auto;
                overflow-x: hidden;
            }

            .m-select {
                margin: 10px;
                /*height: 550px;*/
                width: 23%;
                overflow: auto;
                overflow-x: hidden;
            }

            .m-field-title, .m-select-title {
                height: 30px;
                display: flex;
                align-items: center;
                padding-left: 10px;
                background-color: #252934;
                font-weight: bold;
                font-size: 18px;
                box-shadow: 0px 3px 9px -2px #000000;
                color: #aaaaaa;
                font-size: 13px;
            }

            .m-select-selected {
                background-color: rgba(0, 0, 0, 0.15);
                border-bottom-right-radius: 3px;
                border-bottom-left-radius: 3px;
                padding: 5px;
            }

            .checkBox-style {
                font-size: 15px;
                color: #aaaaaa;
                --paper-checkbox-checked-color: #0087cb;
                --paper-checkbox-label-color: #aaaaaa;
                --paper-checkbox-unchecked-color: #4c5667;
                padding: 3px;
            }

            .m-field {
                height: calc(100% - 30px);
                display: flex;
                flex-direction: column;
                background-color: rgba(0, 0, 0, 0.15);
                overflow: auto;
                overflow-x: hidden;
                padding: 10px;
            }

            iron-selector {
                display: flex;
                flex-direction: column;
            }
        </style>
        <div class="container">
            <div class="class-md" id="mdRadrex">
                <div class="class-md-field">
                    <div style="margin: 10px; height: 42%">
                        <div class="m-field-title">MODALITY</div>
                        <div class="m-field">
                            <paper-checkbox id="modalityFieldAll" class="checkBox-style" noink hidden>All</paper-checkbox>
                            <iron-selector attr-for-selected="value" id="modalityField"
                                           selected-values="{{modalityField}}" multi>
                                <paper-checkbox value="radiology" id="mdFiledRadiology" class="checkBox-style" noink>
                                    Radiology
                                </paper-checkbox>
                                <paper-checkbox value="opthalmology" id="mdFiledOpthalmology" class="checkBox-style" hidden
                                                noink>Opthalmology
                                </paper-checkbox>
                                <paper-checkbox value="nuclearMedicine" id="mdFiledNuclearMedicine" hidden
                                                class="checkBox-style" noink>Nuclear Medicine
                                </paper-checkbox>
                                <paper-checkbox value="radiationOncology" id="mdFiledRadiationOncology" hidden
                                                class="checkBox-style" noink>Radiation Oncology
                                </paper-checkbox>
                                <paper-checkbox value="dental" id="mdFiledDental" class="checkBox-style" hidden noink>Dental
                                </paper-checkbox>
                                <paper-checkbox value="waveform" id="mdFiledWaveform" class="checkBox-style" hidden noink>
                                    Waveform
                                </paper-checkbox>
                                <paper-checkbox value="pathology" id="mdFiledPathology" class="checkBox-style" hidden noink>
                                    Pathology
                                </paper-checkbox>
                                <paper-checkbox value="other" id="mdFiledOther" class="checkBox-style" hidden noink>Other
                                </paper-checkbox>
                                <paper-checkbox value="nonRadrex" id="mdFiledNonRadrex" class="checkBox-style" hidden noink>Radiology
                                </paper-checkbox>
                            </iron-selector>
                        </div>
                    </div>
                </div>
                <div class="class-md-selected">
                    <div class="class-md-selected-contents" id="mdSelectedContens">
                        <div class="m-select" id="mdsRadiology" hidden>
                            <div class="m-select-title">Radiology</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected1All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected1"
                                               selected-values="{{radiology}}" multi>
                                    <paper-checkbox value="XR" id="mdSelectedItem1" class="checkBox-style" noink>XR
                                        (X-ray, Simple radiography)
                                    </paper-checkbox>
                                    <paper-checkbox value="XRandRF" id="mdSelectedItem2" class="checkBox-style" noink>XR
                                        & RF (X-ray and F)
                                    </paper-checkbox>
                                    <paper-checkbox value="RF" id="mdSelectedItem3" class="checkBox-style" noink>RF
                                        (Radio-Fluoroscopy)
                                    </paper-checkbox>
                                    <paper-checkbox value="MG" id="mdSelectedItem4" class="checkBox-style" noink>MG (
                                        Mammography)
                                    </paper-checkbox>
                                    <paper-checkbox value="US" id="mdSelectedItem5" class="checkBox-style" noink>US
                                        (Ultrasound)
                                    </paper-checkbox>
                                    <paper-checkbox value="USandRF" id="mdSelectedItem6" class="checkBox-style" noink>US
                                        & RF (Ultrasound and Fluoroscopy)
                                    </paper-checkbox>
                                    <paper-checkbox value="CT" id="mdSelectedItem7" class="checkBox-style" noink>CT
                                        (Computed Tomography)
                                    </paper-checkbox>
                                    <paper-checkbox value="MR" id="mdSelectedItem8" class="checkBox-style" noink>MR
                                        (Magnetic Resonance Imaging)
                                    </paper-checkbox>
                                    <paper-checkbox value="XA" id="mdSelectedItem9" class="checkBox-style" noink>XA
                                        (X-ray Angiography)
                                    </paper-checkbox>
                                    <paper-checkbox value="RP" id="mdSelectedItem10" class="checkBox-style" noink>RP
                                        (Radiology Procedure)
                                    </paper-checkbox>
                                    <paper-checkbox value="IR" id="mdSelectedItem11" class="checkBox-style" noink>IR
                                        (Interventional Radiology)
                                    </paper-checkbox>
                                    <paper-checkbox value="SR" id="mdSelectedItem12" class="checkBox-style" noink>SR
                                        (Structured Repoting Document)
                                    </paper-checkbox>
                                    <paper-checkbox value="OT" id="mdSelectedItem13" class="checkBox-style" noink>OT
                                        (Other)
                                    </paper-checkbox>
                                    <paper-checkbox value="IVUS" id="mdSelectedItem14" class="checkBox-style" noink>IVUS
                                        (Intravascular Ultrasound)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsOpthalmology" hidden>
                            <div class="m-select-title">Opthalmology</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected2All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected2"
                                               selected-values="{{opthalmology}}" multi>
                                    <paper-checkbox value="OP" name="" id="mdSelected2item1" class="checkBox-style"
                                                    noink>OP (Ophthalmic Photography)
                                    </paper-checkbox>
                                    <paper-checkbox value="SMR" id="mdSelected2item2" class="checkBox-style" noink>SMR
                                        (Stereometric Relationship)
                                    </paper-checkbox>
                                    <paper-checkbox value="AR" id="mdSelected2item3" class="checkBox-style" noink>AR
                                        (Autorefraction )
                                    </paper-checkbox>
                                    <paper-checkbox value="KER" id="mdSelected2item4" class="checkBox-style" noink>KER
                                        (Keratometry)
                                    </paper-checkbox>
                                    <paper-checkbox value="VA" id="mdSelected2item5" class="checkBox-style" noink>VA
                                        (Visual Acuity)
                                    </paper-checkbox>
                                    <paper-checkbox value="SRF" id="mdSelected2item6" class="checkBox-style" noink>SRF
                                        (Subjective Refraction)
                                    </paper-checkbox>
                                    <paper-checkbox value="COT" id="mdSelected2item7" class="checkBox-style" noink>OCT
                                        (Optical Coherence Tomography (non-Ophthalmic))
                                    </paper-checkbox>
                                    <paper-checkbox value="LEN" id="mdSelected2item8" class="checkBox-style" noink>LEN
                                        (Lensometry)
                                    </paper-checkbox>
                                    <paper-checkbox value="OPY" id="mdSelected2item9" class="checkBox-style" noink>OPV
                                        (Ophthalmic Visual Field)
                                    </paper-checkbox>
                                    <paper-checkbox value="OPM" id="mdSelected2item10" class="checkBox-style" noink>OPM
                                        (Ophthalmic Mapping)
                                    </paper-checkbox>
                                    <paper-checkbox value="OAM" id="mdSelected2item11" class="checkBox-style" noink>OAM
                                        (Ophthalmic Axial Measurements )
                                    </paper-checkbox>
                                    <paper-checkbox value="OPT" id="mdSelected2item12" class="checkBox-style" noink>OPT
                                        (Ophthalmic Tomography)
                                    </paper-checkbox>
                                    <paper-checkbox value="IOL" id="mdSelected2item13" class="checkBox-style" noink>IOL
                                        (Intraocular Lens Data)
                                    </paper-checkbox>
                                    <paper-checkbox value="IVOCT" id="mdSelected2item14" class="checkBox-style" noink>
                                        IVOCT (Intravascular Optical Coherence Tomography)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsNuclearMedicine" hidden>
                            <div class="m-select-title">Nuclear Medicine</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected3All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected3"
                                               selected-values="{{nuclearMedicine}}" multi>
                                    <paper-checkbox value="NM" id="mdSelected3item1" class="checkBox-style" noink>NM
                                        (Neclear Medicine)
                                    </paper-checkbox>
                                    <paper-checkbox value="NMandCT" id="mdSelected3item2" class="checkBox-style" noink>
                                        NM & CT (Neclear Medicine and CT)
                                    </paper-checkbox>
                                    <paper-checkbox value="PT" id="mdSelected3item3" class="checkBox-style" noink>PT
                                        (Positron Emission Tomography)
                                    </paper-checkbox>
                                    <paper-checkbox value="PT&CT" id="mdSelected3item4" class="checkBox-style" noink>PT
                                        & CT (Positron Emission Tomography and CT)
                                    </paper-checkbox>
                                    <paper-checkbox value="PTandMR" id="mdSelected3item5" class="checkBox-style" noink>
                                        PT-MR (Positron Emission Tomography and MR)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsRadiationOncology" hidden>
                            <div class="m-select-title">Radiation Oncology</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected4All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected4"
                                               selected-values="{{radiationOncology}}" multi>
                                    <paper-checkbox value="RTIMAGE" id="mdSelected4item1" class="checkBox-style" noink>
                                        RTIMAGE (Radiotherapy Image )
                                    </paper-checkbox>
                                    <paper-checkbox value="RTDOSE" id="mdSelected4item2" class="checkBox-style" noink>
                                        RTDOSE (Radiotherapy Dose)
                                    </paper-checkbox>
                                    <paper-checkbox value="RTSTRUCT" id="mdSelected4item3" class="checkBox-style" noink>
                                        RTSTRUCT (Radiotherapy Structure Set )
                                    </paper-checkbox>
                                    <paper-checkbox value="RTPLAN" id="mdSelected4item4" class="checkBox-style" noink>
                                        RTPLAN (Radiotherapy Plan)
                                    </paper-checkbox>
                                    <paper-checkbox value="RTRECORD" id="mdSelected4item5" class="checkBox-style" noink>
                                        RTRECORD (RT Treatment Record)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsDental" hidden>
                            <div class="m-select-title">Dental</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected5All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected5" selected-values="{{dental}}"
                                               multi>
                                    <paper-checkbox value="IO" id="mdSelected5item1" class="checkBox-style" noink>IO
                                        (Intra-oral Radiography)
                                    </paper-checkbox>
                                    <paper-checkbox value="PX" id="mdSelected5item2" class="checkBox-style" noink>PX
                                        (Panoramic X-Ray)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsWaveform" hidden>
                            <div class="m-select-title">Waveform</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected6All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected6" selected-values="{{waveform}}"
                                               multi>
                                    <paper-checkbox value="AU" id="mdSelected6item1" class="checkBox-style" noink>AU
                                        (Audio )
                                    </paper-checkbox>
                                    <paper-checkbox value="ECG" id="mdSelected6item2" class="checkBox-style" noink>ECG
                                        (Electrocardiography)
                                    </paper-checkbox>
                                    <paper-checkbox value="EPS" id="mdSelected6item3" class="checkBox-style" noink>EPS
                                        (Cardiac Electrophysiology)
                                    </paper-checkbox>
                                    <paper-checkbox value="HD" id="mdSelected6item4" class="checkBox-style" noink>HD
                                        (Hemodynamic Waveform)
                                    </paper-checkbox>
                                    <paper-checkbox value="RESP" id="mdSelected6item5" class="checkBox-style" noink>RESP
                                        (Respiratory Waveform)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsPathology" hidden>
                            <div class="m-select-title">Pathology</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected7All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected7"
                                               selected-values="{{pathology}}" multi>
                                    <paper-checkbox value="GM" id="mdSelected7item1" class="checkBox-style" noink>GM
                                        (General Microscopy)
                                    </paper-checkbox>
                                    <paper-checkbox value="SM" id="mdSelected7item2" class="checkBox-style" noink>SM
                                        (Slide Microscopy)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsOthers" hidden>
                            <div class="m-select-title">Other</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelected8All" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelected8" selected-values="{{other}}"
                                               multi>
                                    <paper-checkbox value="ES" id="mdSelected8item1" class="checkBox-style" noink>ES
                                        (Endoscopy)
                                    </paper-checkbox>
                                    <paper-checkbox value="TG" id="mdSelected8item2" class="checkBox-style" noink>TG
                                        (Thermography)
                                    </paper-checkbox>
                                    <paper-checkbox value="DG" id="mdSelected8item3" class="checkBox-style" noink>DG
                                        (Diaphanography)
                                    </paper-checkbox>
                                    <paper-checkbox value="LS" id="mdSelected8item4" class="checkBox-style" noink>LS
                                        (Laser surface scan)
                                    </paper-checkbox>
                                    <paper-checkbox value="BI" id="mdSelected8item5" class="checkBox-style" noink>BI
                                        (Biomagnetic imaging)
                                    </paper-checkbox>
                                    <paper-checkbox value="XC" id="mdSelected8item6" class="checkBox-style" noink>XC
                                        (External-camera Photography)
                                    </paper-checkbox>
                                    <paper-checkbox value="DOC" id="mdSelected8item7" class="checkBox-style" noink>DOC
                                        (Document)
                                    </paper-checkbox>
                                    <paper-checkbox value="FID" id="mdSelected8item8" class="checkBox-style" noink>FID
                                        (Fiducials)
                                    </paper-checkbox>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="m-select" id="mdsNotRadrex" hidden>
                            <div class="m-select-title">Radiology</div>
                            <div class="m-select-selected">
                                <paper-checkbox id="mdSelectedNotRadrexAll" class="checkBox-style" noink>All</paper-checkbox>
                                <iron-selector attr-for-selected="value" id="mdSelectedNotRadrex" selected-values="{{checkedNotRadrex}}"
                                               multi>
                                    <template is="dom-repeat" items="{{notRadrex}}">
                                        <template is="dom-if" if="{{item.checked}}">
                                            <paper-checkbox value="[[item.modality]]" checked class="checkBox-style" noink>{{item.modality}}</paper-checkbox>
                                        </template>
                                        <template is="dom-if" if="{{!item.checked}}">
                                            <paper-checkbox value="[[item.modality]]" class="checkBox-style" noink>{{item.modality}}</paper-checkbox>
                                        </template>
                                    </template>
                                </iron-selector>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="class-md-btn">
                <button id="nextBtn" class="btn">Next</button>
            </div>
        </div>
    </template>
    <script>
        (function () {
            let _this;
            let g_modalityList = new Array();
            class HhReadingTemplateModality extends Polymer.Element {
                static get is() {
                    return 'hh-reading-template-modality';
                }

                static get properties() {
                    return {
                        modalityField: {
                            type: Array
                        },
                        radiology: {
                            type: Array
                        },
                        opthalmology: {
                            type: Array
                        },
                        nuclearMedicine: {
                            type: Array
                        },
                        radiationOncology: {
                            type: Array
                        },
                        dental: {
                            type: Array
                        },
                        waveform: {
                            type: Array
                        },
                        pathology: {
                            type: Array
                        },
                        other: {
                            type: Array
                        },
                        notRadrex:{
                            type: Array
                        },
                        checkedNotRadrex:{
                            type:Array
                        }
                    }
                }

                constructor() {
                    super();
                    _this = this;
                }

                ready() {
                    super.ready();

                    this.$.modalityFieldAll.addEventListener('change', function (e) {
                        // _this.activeNextData();
                        _this.$.modalityField.children[0].checked = e.target.checked;
                    });

                    this.$.mdFiledRadiology.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledRadiology.checked) {
                            _this.$.mdsRadiology.hidden = false;
                        } else {
                            _this.$.mdSelected1All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected1.childElementCount; i++) {
                                _this.$.mdSelected1.children[i].checked = false;
                            }
                            _this.radiology = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsRadiology.hidden = true;
                        }
                    });

                    this.$.mdFiledOpthalmology.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledOpthalmology.checked) {
                            _this.$.mdsOpthalmology.hidden = false;
                        } else {
                            _this.$.mdSelected2All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected2.childElementCount; i++) {
                                _this.$.mdSelected2.children[i].checked = false;
                            }
                            _this.opthalmology = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsOpthalmology.hidden = true;
                        }
                    })

                    this.$.mdFiledNuclearMedicine.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledNuclearMedicine.checked) {
                            _this.$.mdsNuclearMedicine.hidden = false;
                        } else {
                            _this.$.mdSelected3All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected3.childElementCount; i++) {
                                _this.$.mdSelected3.children[i].checked = false;
                            }
                            _this.nuclearMedicine = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsNuclearMedicine.hidden = true;
                        }
                    })

                    this.$.mdFiledRadiationOncology.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledRadiationOncology.checked) {
                            _this.$.mdsRadiology.hidden = false;
                        } else {
                            _this.$.mdSelected4All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected4.childElementCount; i++) {
                                _this.$.mdSelected4.children[i].checked = false;
                            }
                            _this.radiationOncology = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsRadiology.hidden = true;
                        }
                    })

                    this.$.mdFiledDental.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledDental.checked) {
                            _this.$.mdsDental.hidden = false;
                        } else {
                            _this.$.mdSelected5All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected5.childElementCount; i++) {
                                _this.$.mdSelected5.children[i].checked = false;
                            }
                            _this.dental = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsDental.hidden = true;
                        }
                    })

                    this.$.mdFiledWaveform.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledWaveform.checked) {
                            _this.$.mdsWaveform.hidden = false;
                        } else {
                            _this.$.mdSelected6All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected6.childElementCount; i++) {
                                _this.$.mdSelected6.children[i].checked = false;
                            }
                            _this.waveform = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsWaveform.hidden = true;
                        }
                    })

                    this.$.mdFiledPathology.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledPathology.checked) {
                            _this.$.mdsPathology.hidden = false;
                        } else {
                            _this.$.mdSelected7All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected7.childElementCount; i++) {
                                _this.$.mdSelected7.children[i].checked = false;
                            }
                            _this.pathology = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsPathology.hidden = true;
                        }
                    })

                    this.$.mdFiledOther.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledOther.checked) {
                            _this.$.mdsOthers.hidden = false;
                        } else {
                            _this.$.mdSelected8All.checked = false;
                            for (let i = 0; i < _this.$.mdSelected8.childElementCount; i++) {
                                _this.$.mdSelected8.children[i].checked = false;
                            }
                            _this.other = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsOthers.hidden = true;
                        }
                    })

                    this.$.mdFiledNonRadrex.addEventListener('checked-changed', function (e) {
                        // _this.activeNextData();
                        if (_this.$.mdFiledNonRadrex.checked) {
                            _this.$.mdsNotRadrex.hidden = false;
                        } else {
                            _this.$.mdSelectedNotRadrexAll.checked = false;
                            for (let i = 0; i < _this.$.mdSelectedNotRadrex.childElementCount; i++) {
                                _this.$.mdSelectedNotRadrex.children[i].checked = false;
                            }
                            _this.checkedNotRadrex = [];
                            _this.$.modalityFieldAll.checked = false;
                            _this.$.mdsNotRadrex.hidden = true;
                        }

                        if(!e.detail.value){
                            let param = new Object();
                            let modality = new Array();
                            param.modality = modality;
                            _this.dispatchEvent(new CustomEvent('checkedModality',param));
                        }
                    });


                    /**
                     * SELECTED AREA CHECKBOX
                     *
                     * Create by BohyunJang on 2019-01-14 오후 4:27
                     **/

                    this.$.mdSelected1All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        for (let i = 0; i < _this.$.mdSelected1.childElementCount; i++) {
                            _this.$.mdSelected1.children[i].checked = e.target.checked;
                            if(_this.$.mdSelected1.children[i].checked){
                                _this.radiology.push(_this.$.mdSelected1.children[i].value);
                            }else{
                                _this.radiology = [];
                            }
                            cnt++;
                            if(cnt == _this.$.mdSelected1.childElementCount){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelected2All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelected2.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelected2.children[i].checked = e.target.checked;

                            if(_this.$.mdSelected2.children[i].checked){
                                _this.opthalmology.push(_this.$.mdSelected2.children[i].value);
                            }else{
                                _this.opthalmology = [];
                            }
                            cnt++;
                            if(cnt == totCnt){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelected3All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelected3.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelected3.children[i].checked = e.target.checked;

                            if(_this.$.mdSelected3.children[i].checked){
                                _this.nuclearMedicine.push(_this.$.mdSelected3.children[i].value);
                            }else{
                                _this.nuclearMedicine = [];
                            }
                            cnt++;
                            if(cnt == totCnt){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelected4All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelected4.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelected4.children[i].checked = e.target.checked;
                            if(_this.$.mdSelected4.children[i].checked){
                                _this.radiationOncology.push(_this.$.mdSelected4.children[i].value);
                            }else{
                                _this.radiationOncology = [];
                            }
                            cnt++;
                            if(cnt == totCnt){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelected5All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelected5.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelected5.children[i].checked = e.target.checked;
                            if(_this.$.mdSelected5.children[i].checked){
                                _this.dental.push(_this.$.mdSelected5.children[i].value);
                            }else{
                                _this.dental = [];
                            }
                            cnt++;
                            if(cnt == totCnt){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelected6All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelected6.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelected6.children[i].checked = e.target.checked;
                            if(_this.$.mdSelected6.children[i].checked){
                                _this.waveform.push(_this.$.mdSelected6.children[i].value);
                            }else{
                                _this.waveform = [];
                            }
                            cnt++;
                            if(cnt == totCnt){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelected7All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelected7.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelected7.children[i].checked = e.target.checked;
                            if(_this.$.mdSelected7.children[i].checked){
                                _this.pathology.push(_this.$.mdSelected7.children[i].value);
                            }else{
                                _this.pathology = [];
                            }
                            cnt++;
                            if(cnt == totCnt){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelected8All.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelected8.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelected8.children[i].checked = e.target.checked;
                            if(_this.$.mdSelected8.children[i].checked){
                                _this.other.push(_this.$.mdSelected8.children[i].value);
                            }else{
                                _this.other = [];
                            }
                            cnt++;
                            if(cnt == totCnt){
                                // _this.activeNextData();
                            }
                        }
                    });

                    this.$.mdSelectedNotRadrexAll.addEventListener('checked-changed', function (e) {
                        let cnt = 0;
                        let totCnt = _this.$.mdSelectedNotRadrex.childElementCount;
                        for (let i = 0; i < totCnt; i++) {
                            _this.$.mdSelectedNotRadrex.children[i].checked = e.target.checked;
                            // if(_this.$.mdSelectedNotRadrex.children[i].checked){
                            //     _this.checkedNotRadrex.push(_this.$.mdSelectedNotRadrex.children[i].value);
                            // }else{
                            //     _this.checkedNotRadrex = [];
                            // }
                            cnt++;
                            if(cnt == totCnt){
                                _this.checkedNotRadrex = new Array();
                                console.log(e);
                                // let param = new Object();
                                // param.modality = new Array();
                                // _this.dispatchEvent(new CustomEvent('checkedModality',param));
                                // _this.activeNextData();
                            }
                        }
                    });

                    // this.$.mdSelected1.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // })
                    // this.$.mdSelected2.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // })
                    // this.$.mdSelected3.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // })
                    // this.$.mdSelected4.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // })
                    // this.$.mdSelected5.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // })
                    // this.$.mdSelected6.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // })
                    // this.$.mdSelected7.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // })
                    // this.$.mdSelected8.addEventListener('selected-items-changed', function () {
                    //     _this.activeNextData();
                    // });
                    this.$.mdSelectedNotRadrex.addEventListener('selected-items-changed', function (e) {
                        if(e.detail.value.length > 0){
                            let cntModal =0
                            let param = new Object();
                            let modality = new Array();
                            for(let i=0; i<e.detail.value.length; i++){
                                modality.push(e.detail.value[i].innerText);
                                cntModal++;
                                if(cntModal == e.detail.value.length){
                                    param.detail = modality;
                                    _this.dispatchEvent(new CustomEvent('checkedModality',param));
                                }
                            }
                        }
                    });

                    this.$.nextBtn.addEventListener('click', function () {
                        _this.dispatchEvent(new CustomEvent('nextTabEvent'));
                    });
                }

                activeNextData() {
                    let param = new Object();
                    let detail = new Object();
                    let modality = new Array();
                    let validationFieldCheckbox = false;
                    for(let i=0; i<this.$.modalityField.childElementCount; i++){
                        if(_this.$.modalityField.children[i].checked){
                            validationFieldCheckbox = true;
                        }
                    }
                    let validationSelectedChecbox = Boolean(_this.radiology.length > 0 || _this.opthalmology.length > 0 || _this.nuclearMedicine.length > 0 || _this.radiationOncology.length > 0 ||
                        _this.dental.length > 0 || _this.waveform.length > 0 || _this.pathology.length > 0 || _this.other.length > 0 || _this.checkedNotRadrex.length > 0);
                    if ( validationFieldCheckbox && validationSelectedChecbox ) {
                        _this.$.nextBtn.style.backgroundColor = "#0087cb";
                        _this.$.nextBtn.disabled = false;
                        detail.nextBtn = true;
                        if(_this.radiology.length){
                            // modality.push(_this.radiology);
                            for(let i=0; i<_this.radiology.length; i++){
                                modality.push(_this.radiology[i]);
                            }
                        }

                        if(_this.checkedNotRadrex.length){
                            for(let i=0; i<_this.checkedNotRadrex.length; i++){
                                modality.push(_this.checkedNotRadrex[i]);
                            }
                        }

                        // if(_this.opthalmology.length){modality.push(_this.opthalmology)}
                        // if(_this.nuclearMedicine.length){modality.push(_this.nuclearMedicine)}
                        // if(_this.radiationOncology.length){modality.push(_this.radiationOncology)}
                        // if(_this.dental.length){modality.push(_this.dental)}
                        // if(_this.waveform.length){modality.push(_this.waveform)}
                        // if(_this.pathology.length){modality.push(_this.pathology)}
                        // if(_this.other.length){modality.push(_this.other)}

                        // TODO :: radrex, loinc에 대한 정립이 명확하면 수정.
                        // reading Template를 저장할때 무슨 기준으로 저장할 것인가?
                        detail.category = "nomal";
                        // detail.category = "radrex";

                        detail.modality = modality;
                        param.detail = detail;
                        _this.dispatchEvent(new CustomEvent('activeTab', param));
                    } else {
                        _this.$.nextBtn.style.backgroundColor = "#dddddd";
                        _this.$.nextBtn.disabled = true;
                        detail.nextBtn = false;
                        param.detail = detail;
                        _this.dispatchEvent(new CustomEvent('activeTab', param));
                    }
                }

                getOtherModalityList(param){
                    g_modalityList = param.modalityList;
                    this.notRadrex = new Array();
                    let category = param.category;
                    if(g_modalityList.length > 0){
                        if(category == "nomal"){
                            this.modalCssHidden();
                            for(let i=0; i<g_modalityList.length; i++){
                                let rt = new Object();
                                rt.modality = g_modalityList[i];
                                rt.checked = false;
                                this.notRadrex.push(rt);
                            }
                        }else if(category == "loinc"){
                            console.log("loinc");
                        }else if(category == "radrex"){
                            console.log("radrex");
                        }
                    }else{
                        g_modalityList = param.facilitySensitive.modalityList;
                        if(category == "nomal"){
                            this.modalCssHidden();
                            for(let i=0; i<g_modalityList.length; i++){
                                this.notRadrex.push( g_modalityList[i])
                            }
                        }else if(category == "loinc"){
                            console.log("loinc");
                        }else if(category == "radrex"){
                            console.log("radrex");
                        }
                    }
                }

                modalCssHidden(){
                    this.$.mdFiledRadiology.hidden = true;
                    this.$.mdFiledNonRadrex.hidden = false;
                }

                setAllModality(){
                    console.log("ALL MODALITY");
                }

                setModality(readingTemplate){
                    let cnt = 0;
                    if(readingTemplate.category == "nomal"){
                        this.notRadrex = new Array();
                        this.$.mdFiledNonRadrex.checked = true;
                        for(let i=0; i<g_modalityList.length; i++){
                            let rt = new Object();
                            rt.modality = g_modalityList[i];
                            this.notRadrex.push(rt);
                            cnt++;
                            if(cnt == g_modalityList.length){
                                let cnt2 = 0;
                                for(let j=0; j<this.notRadrex.length; j++){
                                    for(let k=0; k<readingTemplate.modality.length; k++){
                                        // console.log(this.notRadrex[j].modality);
                                        // console.log(readingTemplate.modality[k]);
                                        if(this.notRadrex[j].modality.includes(readingTemplate.modality[k])){
                                            this.notRadrex[j].checked = true;
                                            this.checkedNotRadrex.push(this.notRadrex[j].modality);
                                        }else if(!this.notRadrex[j].checked){
                                            this.notRadrex[j].checked = false;
                                        }
                                    }
                                    cnt2++;
                                    if(cnt2 == this.notRadrex.length){
                                        this.activeNextData();
                                    }
                                }
                            }
                        }
                    }else if(readingTemplate.category == "radrex"){
                        this.$.mdFiledNonRadrex.checked = true;
                        for (let k = 0; k < readingTemplate.modality.length; k++) {
                            if (readingTemplate.modality[k].includes(_this.$.mdSelectedContens.children[0].children[1].children[1].children[i].value)) {
                                for (let j = 0; j < _this.$.modalityField.childElementCount; j++) {
                                    if (_this.$.modalityField.children[j].innerText == _this.$.mdSelectedContens.children[0].children[0].innerText && !_this.$.modalityField.children[j].checked) {
                                        _this.$.modalityField.children[j].checked = true;
                                    }
                                }
                                _this.$.mdSelectedContens.children[0].children[1].children[1].children[k].checked = true;
                                _this.$.mdSelectedContens.children[0].children[1].children[1].selectIndex(k);
                            }
                        }
                    }else if(readingTemplate.category == "loinc"){
                        console.log("loinc");
                        console.log(readingTemplate);
                    }
                }
            }

            window.customElements.define(HhReadingTemplateModality.is, HhReadingTemplateModality);
        })();
    </script>
</dom-module>
